# YouTube Learning Companion App

---

## ğŸŒ Language / è¨€èª

- [æ—¥æœ¬èªç‰ˆ](#æ—¥æœ¬èªç‰ˆ)
- [English Version](#english-version)

---

# æ—¥æœ¬èªç‰ˆ

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç›®çš„ (What & Why)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**YouTubeå‹•ç”»ã®ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆå­—å¹•ï¼‰ã‚’æ´»ç”¨ã—ã€å‹•ç”»è¦–è´ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãç›®æ¬¡ã®æ¢ç´¢ã€ãŠã‚ˆã³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«é–¢ã™ã‚‹å¯¾è©±å‹ãƒãƒ£ãƒƒãƒˆã‚’èåˆã•ã›ãŸæœ€é«˜ã®å­¦ç¿’ä½“é¨“ã‚’å®Ÿç¾ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã®é–‹ç™ºã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

å¾“æ¥ã®YouTubeè¦–è´ä½“é¨“ã§ã¯ã€é•·ã„å‹•ç”»ã‹ã‚‰ç‰¹å®šã®æƒ…å ±ã‚’æ¢ã—ãŸã‚Šã€å†…å®¹ã‚’æ·±ãç†è§£ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒå›°é›£ã§ã—ãŸã€‚ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€AIæŠ€è¡“ã‚’æ´»ç”¨ã—ã¦ä»¥ä¸‹ã‚’å®Ÿç¾ã—ã¾ã™ï¼š

- **åŠ¹ç‡çš„ãªå­¦ç¿’**: è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ç›®æ¬¡ã§ã€å¿…è¦ãªç®‡æ‰€ã«ç´ æ—©ãã‚¢ã‚¯ã‚»ã‚¹
- **æ·±ã„ç†è§£**: å‹•ç”»å†…å®¹ã«é–¢ã™ã‚‹è³ªå•ã«å³åº§ã«å›ç­”ã™ã‚‹AIãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- **ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªä½“é¨“**: å‹•ç”»ã€å­—å¹•ã€ãƒãƒ£ãƒƒãƒˆãŒä¸€ä½“ã¨ãªã£ãŸçµ±åˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

## 2. ä¸»è¦æ©Ÿèƒ½

### âœ… èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- Google OAuthã«ã‚ˆã‚‹å®‰å…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ä¿è­·ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹

### ğŸ“¹ å‹•ç”»ç®¡ç†
- YouTubeå‹•ç”»ã®URLã‹ã‚‰ã®ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- å‹•ç”»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ã€ã‚µãƒ ãƒã‚¤ãƒ«ã€ãƒãƒ£ãƒ³ãƒãƒ«åï¼‰ã®è‡ªå‹•å–å¾—
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãå­—å¹•ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãƒ»ä¿å­˜
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®å‹•ç”»ä¸€è¦§è¡¨ç¤ºã¨ç®¡ç†
- å‹•ç”»å‰Šé™¤æ©Ÿèƒ½ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆç«¶åˆã‚’è€ƒæ…®ã—ãŸå®‰å…¨ãªå®Ÿè£…ï¼‰

### ğŸ“ å­¦ç¿’ä½“é¨“
- **çµ±åˆå­¦ç¿’ç”»é¢**:
  - YouTubeå‹•ç”»ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã™ã‚‹ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãå­—å¹•è¡¨ç¤º
  - AIç”Ÿæˆã«ã‚ˆã‚‹è‡ªå‹•ç›®æ¬¡ï¼ˆãƒãƒ£ãƒ—ã‚¿ãƒ¼ï¼‰
  - å‹•ç”»å†…å®¹ã«åŸºã¥ã„ãŸå¯¾è©±å‹AIãƒãƒ£ãƒƒãƒˆ
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½**:
  - å­—å¹•ã‚„ç›®æ¬¡ã®ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã‚‹å‹•ç”»ã‚·ãƒ¼ã‚¯
  - AIãƒãƒ£ãƒƒãƒˆã®å›ç­”ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¸ã®ã‚¸ãƒ£ãƒ³ãƒ—
  - å­—å¹•å†…æ¤œç´¢æ©Ÿèƒ½
  - ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã®ä¿å­˜ãƒ»è¡¨ç¤º

### ğŸ¨ UI/UX
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œï¼‰
- Tailwind CSSã«ã‚ˆã‚‹ç¾ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- 3ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒªã‚µã‚¤ã‚ºå¯èƒ½ãªãƒ‘ãƒãƒ«ï¼‰
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é©åˆ‡ãªè¡¨ç¤º

## 3. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| åˆ†é‡ | æŠ€è¡“ |
|------|------|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Next.js (App Router) |
| **è¨€èª** | TypeScript |
| **èªè¨¼** | NextAuth.js + Google Provider |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | Prisma (RDBMSæ¨å¥¨) |
| **APIé€£æº** | YouTube Data API v3 |
| **AI** | Claude 3.5 Sonnet (äºˆå®š) |

## 4. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹æˆ (é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€é•·æœŸé–“ã®è‡ªå¾‹çš„ãªé–‹ç™ºï¼ˆãƒ­ãƒ³ã‚°ãƒ©ãƒ³ï¼‰ã¨ç²¾åº¦ç¶­æŒã®ãŸã‚ã€**ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ–¹å¼**ã«ã‚ˆã‚Šé€²è¡Œã—ã¾ã™ã€‚

### 4.1 ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (Initializer Agent)

**æ‹…å½“**: Antigravity (Gemini 1.5 Pro)

**å½¹å‰²**:
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸè¨­å®šã¨ã‚¿ã‚¹ã‚¯ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- è©³ç´°ãªæ©Ÿèƒ½ãƒªã‚¹ãƒˆ (`features.json`) ã®JSONå½¢å¼ã§ã®ä½œæˆ
- Gitã®åˆæœŸåŒ–ã¨ãƒ•ã‚¡ã‚¤ãƒ«å·®åˆ†è¿½è·¡ã®è¨­å®š
- ä½œæ¥­ãƒ­ã‚° (`progress.txt`) ã®å®šç¾©

### 4.2 ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (Coding Agent)

**æ‹…å½“**: Claude Sonnet 4.5

**å½¹å‰²**:
- ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ãƒ¼ãŒä½œæˆã—ãŸæ©Ÿèƒ½ãƒªã‚¹ãƒˆã‹ã‚‰ã‚¿ã‚¹ã‚¯ã‚’ä¸€ã¤ãšã¤é¸ã‚“ã§å®Ÿè£…
- ã‚³ãƒ¼ãƒ‰å“è³ªã®ç¶­æŒã¨æ—¢å­˜æ©Ÿèƒ½ã®ä¿å®ˆ
- ã‚¿ã‚¹ã‚¯å®Œäº†å¾Œã®ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ä½œæˆã¨æ¬¡ã‚¿ã‚¹ã‚¯ã¸ã®å¼•ãç¶™ã

### 4.3 é–¢å¿ƒäº‹ã®åˆ†é›¢ (Separation of Concerns)

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆã‚’å®Ÿç¾ï¼š
- **æ˜ç¢ºãªå½¹å‰²åˆ†æ‹…**: è¨ˆç”»ã¨å®Ÿè£…ã‚’åˆ†é›¢ã—ã€ãã‚Œãã‚Œã«æœ€é©åŒ–
- **å“è³ªä¿è¨¼**: å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå°‚é–€é ˜åŸŸã«é›†ä¸­
- **é€²æ—ã®å¯è¦–åŒ–**: `features.json`ã¨`progress.txt`ã«ã‚ˆã‚‹é€æ˜ãªç®¡ç†
- **é•·æœŸçš„ãªå®‰å®šæ€§**: æ®µéšçš„ãªé–‹ç™ºã«ã‚ˆã‚Šã€è¤‡é›‘ã•ã‚’åˆ¶å¾¡

## 5. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
youtube-learning-companion/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â”œâ”€â”€ (auth)/            # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ (main)/
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â””â”€â”€ learn/[videoId]/ # å­¦ç¿’ç”»é¢
â”‚   â”‚   â”œâ”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ components/            # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ types/                 # TypeScriptå‹å®šç¾©
â”œâ”€â”€ docs/                      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ authentication.md      # Google OAuthèªè¨¼ã®å®Ÿè£…ä»•æ§˜
â”‚   â”œâ”€â”€ import_video.md        # YouTubeå‹•ç”»ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®ä»•æ§˜
â”‚   â”œâ”€â”€ ui_design_guidelines.md # UIãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
â”‚   â”œâ”€â”€ incident_reports.md    # éå»ã®ä¸å…·åˆã¨è§£æ±ºç­–
â”‚   â””â”€â”€ walkthrough_20241214.md # ä¿®æ­£ã®æŠ€è¡“çš„è©³ç´°
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ features.json              # æ©Ÿèƒ½ãƒªã‚¹ãƒˆï¼ˆInitializerç®¡ç†ï¼‰
â”œâ”€â”€ progress.txt               # ä½œæ¥­é€²æ—ãƒ­ã‚°ï¼ˆCoding Agentæ›´æ–°ï¼‰
â”œâ”€â”€ CLAUDE.md                  # AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ‡é‡
â””â”€â”€ .env.local                 # ç’°å¢ƒå¤‰æ•°ï¼ˆGitã«å«ã‚ãªã„ï¼‰
```

## 6. é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 6.1 å‰ææ¡ä»¶

- Node.js 18.x ä»¥ä¸Š
- npm, yarn, ã¾ãŸã¯ pnpm
- Google Cloud Platform ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆOAuthèªè¨¼ç”¨ï¼‰
- YouTube Data API ã‚­ãƒ¼

### 6.2 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

#### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/tinyoko/cc_ytlearn.git
cd cc_ytlearn
```

#### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
# ã¾ãŸã¯
yarn install
# ã¾ãŸã¯
pnpm install
```

#### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ä½œæˆã—ã€ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

```bash
# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# NextAuth
NEXTAUTH_SECRET=your_random_secret_string
NEXTAUTH_URL=http://localhost:3000

# Database
DATABASE_URL="postgresql://user:password@host:port/database"

# YouTube API
YOUTUBE_API_KEY=your_youtube_api_key
```

**ç’°å¢ƒå¤‰æ•°ã®å–å¾—æ–¹æ³•**:
- `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`: [Google Cloud Console](https://console.cloud.google.com/) ã§OAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
- `NEXTAUTH_SECRET`: `openssl rand -base64 32` ã§ç”Ÿæˆ
- `YOUTUBE_API_KEY`: Google Cloud Consoleã§YouTube Data API v3ã‚’æœ‰åŠ¹åŒ–

#### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Prismaã‚¹ã‚­ãƒ¼ãƒã®é©ç”¨ã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
npx prisma migrate dev --name init

# Prisma Clientã®ç”Ÿæˆ
npx prisma generate
```

#### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

## 7. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®ãƒ«ãƒ¼ãƒ«

- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `src/components/` ã«é…ç½®
- **API Routes**: `src/app/api/` ã«é…ç½®
- **å‹å®šç¾©**: `src/types/` ã«é…ç½®
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**: `src/lib/` ã«é…ç½®

### ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«

- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: Prettier ã‚’ä½¿ç”¨
- **é™çš„è§£æ**: ESLint ã‚’ä½¿ç”¨
- **å‘½åè¦å‰‡**: camelCaseï¼ˆå¤‰æ•°ãƒ»é–¢æ•°ï¼‰ã€PascalCaseï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»å‹ï¼‰

## 8. å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|-------------|------|
| [`docs/authentication.md`](docs/authentication.md) | Google OAuthèªè¨¼ã®å®Ÿè£…ä»•æ§˜ |
| [`docs/import_video.md`](docs/import_video.md) | YouTubeå‹•ç”»ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®ä»•æ§˜ |
| [`docs/ui_design_guidelines.md`](docs/ui_design_guidelines.md) | UIãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆè‰²ã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰ |
| [`features.json`](features.json) | ã‚¿ã‚¹ã‚¯ä¸€è¦§ï¼ˆã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ãƒ¼ãŒç®¡ç†ï¼‰ |
| [`progress.txt`](progress.txt) | ä½œæ¥­é€²æ—ãƒ­ã‚°ï¼ˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæ›´æ–°ï¼‰ |
| [`docs/incident_reports.md`](docs/incident_reports.md) | **é‡è¦**: éå»ã®é‡å¤§ãªä¸å…·åˆã®è§£æ±ºç­–ã¨å†ç™ºé˜²æ­¢ç­– |
| [`docs/walkthrough_20241214.md`](docs/walkthrough_20241214.md) | å­—å¹•ãƒ»å‹•ç”»å‰Šé™¤æ©Ÿèƒ½ä¿®æ­£ã®æŠ€è¡“çš„è©³ç´° |

## 9. éå»ã®ä¿®æ­£çµŒç·¯ã¨AIã¸ã®ç”³ã—é€ã‚Šäº‹é …

âš ï¸ **å°†æ¥ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®é‡è¦ãªæŒ‡ç¤º**

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®‰å®šç¨¼åƒã¨ä»Šå¾Œã®é–‹ç™ºåŠ¹ç‡ã®ãŸã‚ã€ä»¥ä¸‹ã®æ•™è¨“ã‚’å¸¸ã«è€ƒæ…®ã—ã¦ãã ã•ã„ï¼ˆè©³ç´°ã¯ [`docs/incident_reports.md`](docs/incident_reports.md) ã‚’å‚ç…§ï¼‰ã€‚

### 9.1 ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´ç¦æ­¢

**èƒŒæ™¯**: 2025-12-14ã«ç™ºç”Ÿã—ãŸã€Œå­—å¹•ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒå…¨ã¦0:00ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€å•é¡Œã€‚

**åŸå› **:
1. æ£æ„çš„ãªã€Œ10ç§’ã—ãã„å€¤åˆ¤å®šã€ã«ã‚ˆã‚Šã€æœ‰åŠ¹ãªã‚»ã‚°ãƒ¡ãƒ³ãƒˆãŒé™¤å¤–ã•ã‚Œã¦ã„ãŸ
2. `youtubei.js` ã‹ã‚‰ã®ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å˜ç´”ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ã§å‡¦ç†ã—ã¦ã„ãŸ
3. ãƒ‡ãƒ¼ã‚¿ã®JSONäºŒé‡åŒ–ã«ã‚ˆã‚‹ä¸æ•´åˆ

**è§£æ±ºç­–ã¨ç”³ã—é€ã‚Š**:
- âœ… **ç¾åœ¨ã®å³å¯†ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒã‚§ãƒƒã‚¯æ–¹å¼ã‚’ç¶­æŒã™ã‚‹ã“ã¨**
- âœ… ãƒ‡ãƒ¼ã‚¿æ­£è¦åŒ–: `JSON.parse(JSON.stringify(raw))` ã«ã‚ˆã‚‹Plain ObjectåŒ–
- âŒ **æ¨æ¸¬ãƒ™ãƒ¼ã‚¹ã®åˆ¤å®šã‚„æ£æ„çš„ãªã—ãã„å€¤ï¼ˆä¾‹ï¼š10ç§’ãƒ«ãƒ¼ãƒ«ï¼‰ã®å†å°å…¥ã¯ç¦æ­¢**

**å‚ç…§**: `src/lib/transcript-utils.ts`

### 9.2 ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ³¨æ„

**èƒŒæ™¯**: 2025-12-14ã«ç™ºç”Ÿã—ãŸã€Œå‹•ç”»å‰Šé™¤ãƒœã‚¿ãƒ³ãŒå‹•ä½œã—ãªã„ã€å•é¡Œã€‚

**åŸå› **:
- `<Link>` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚«ãƒ¼ãƒ‰å…¨ä½“ã‚’ãƒ©ãƒƒãƒ—
- å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒšãƒ¼ã‚¸é·ç§»ã‚¤ãƒ™ãƒ³ãƒˆãŒç«¶åˆ

**è§£æ±ºç­–ã¨ç”³ã—é€ã‚Š**:
- âœ… **ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ ã‚’é¿ã‘ã‚‹**
- âœ… `<Link>` ã§å…¨ä½“ã‚’å›²ã¾ãšã€`div` + `onClick` (router.push) ã‚’ä½¿ç”¨
- âœ… å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’ç‹¬ç«‹ã•ã›ã€`e.stopPropagation()` ã§ã‚¤ãƒ™ãƒ³ãƒˆä¼æ’­ã‚’é˜²æ­¢

**å‚ç…§**: `src/components/DashboardClient.tsx`, `src/app/learn/[id]/learn-client.tsx`

### 9.3 ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®æ‰±ã„

**èƒŒæ™¯**: `window.confirm` ãŒç’°å¢ƒã«ã‚ˆã£ã¦ä¸å®‰å®šï¼ˆä¸€ç¬ã§æ¶ˆãˆã‚‹ã€å‹•ä½œã—ãªã„ï¼‰ã€‚

**è§£æ±ºç­–ã¨ç”³ã—é€ã‚Š**:
- âŒ **`window.confirm` ã‚„ `alert` ã«ä¾å­˜ã—ãªã„**
- âœ… ç‹¬è‡ªã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
- âœ… ã¾ãŸã¯å³æ™‚å®Ÿè¡Œ + Undoæ©Ÿèƒ½ã®æ¤œè¨

## 10. é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ã¨ä»Šå¾Œã®è¨ˆç”»ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- **æ©Ÿèƒ½ãƒªã‚¹ãƒˆ**: [`features.json`](features.json) - å…¨æ©Ÿèƒ½ã®è©³ç´°ã‚¿ã‚¹ã‚¯ä¸€è¦§
- **é€²æ—ãƒ­ã‚°**: [`progress.txt`](progress.txt) - å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã®è¨˜éŒ²

ä¸»è¦ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ï¼ˆäºˆå®šï¼‰:
1. âœ… ç’°å¢ƒæ§‹ç¯‰ã¨åˆæœŸè¨­å®š (F001)
2. âœ… èªè¨¼æ©Ÿèƒ½ (F002)
3. âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ (F003)
4. ğŸ”„ å‹•ç”»ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ (F004)
5. ğŸ“… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½ (F005)
6. ğŸ“… å­¦ç¿’ãƒšãƒ¼ã‚¸ (F006)
7. ğŸ“… UI/UXã®æœ€é©åŒ– (F007-F008)
8. ğŸ“… å‹å®šç¾©ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®æ•´å‚™ (F009)

## 11. ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ç¾åœ¨ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸»å°ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ãŒã€äººé–“ã®é–‹ç™ºè€…ã‹ã‚‰ã®è²¢çŒ®ã‚‚æ­“è¿ã—ã¾ã™ã€‚

### è²¢çŒ®æ–¹æ³•

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'feat: Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

### æ³¨æ„äº‹é …

- **å¿…ãš `docs/incident_reports.md` ã‚’ç¢ºèª**ã—ã¦ã‹ã‚‰ã€å­—å¹•å‡¦ç†ã‚„å‰Šé™¤æ©Ÿèƒ½ã«é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„
- **`features.json` ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½**ã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã€äº‹å‰ã«Issueã§ææ¡ˆã—ã¦ãã ã•ã„

## 12. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

TBD (ä»Šå¾Œæ±ºå®šäºˆå®š)

---

# English Version

## 1. Project Overview

### 1.1 Purpose (What & Why)

This project aims to develop a **web application that provides the ultimate learning experience by integrating YouTube video playback, timestamp-indexed table of contents exploration, and interactive chat about content, all powered by YouTube video transcripts (subtitles)**.

Traditional YouTube viewing experiences make it difficult to find specific information in long videos or deeply understand content. This application uses AI technology to achieve the following:

- **Efficient Learning**: Quickly access needed sections with auto-generated table of contents
- **Deep Understanding**: AI chat feature that instantly answers questions about video content
- **Seamless Experience**: Integrated interface combining video, subtitles, and chat

## 2. Key Features

### âœ… Authentication & Security
- Secure user authentication via Google OAuth
- Session management and protected page access

### ğŸ“¹ Video Management
- One-click import from YouTube video URLs
- Automatic retrieval of video metadata (title, description, thumbnail, channel name)
- Fetching and storing timestamped subtitle data
- Video list display and management on dashboard
- Video deletion feature (safe implementation considering event conflicts)

### ğŸ“ Learning Experience
- **Integrated Learning Screen**:
  - YouTube video player
  - Real-time synchronized timestamped subtitle display
  - AI-generated automatic table of contents (chapters)
  - Interactive AI chat based on video content
- **Interactive Features**:
  - Video seeking by clicking subtitles or table of contents
  - Jumping to timestamps from AI chat responses
  - Subtitle search functionality
  - Chat history saving and display

### ğŸ¨ UI/UX
- Responsive design (mobile/tablet/desktop support)
- Beautiful interface with Tailwind CSS
- 3-column layout (resizable panels)
- Proper loading states and error message display

## 3. Technology Stack

| Category | Technology |
|----------|-----------|
| **Framework** | Next.js (App Router) |
| **Language** | TypeScript |
| **Authentication** | NextAuth.js + Google Provider |
| **Styling** | Tailwind CSS |
| **Database** | Prisma (RDBMS recommended) |
| **API Integration** | YouTube Data API v3 |
| **AI** | Claude 3.5 Sonnet (planned) |

## 4. Agent Configuration (Development Process)

This project progresses using a **multi-agent approach** for long-term autonomous development and precision maintenance.

### 4.1 Initializer Agent

**In Charge**: Antigravity (Gemini 1.5 Pro)

**Responsibilities**:
- Project initial setup and task orchestration
- Creating detailed feature list (`features.json`) in JSON format
- Git initialization and file diff tracking setup
- Defining work log (`progress.txt`)

### 4.2 Coding Agent

**In Charge**: Claude Sonnet 4.5

**Responsibilities**:
- Selecting and implementing tasks one by one from the feature list created by Initializer
- Maintaining code quality and existing features
- Creating commit logs after task completion and handoff to next task

### 4.3 Separation of Concerns

This approach achieves the following benefits:
- **Clear Role Division**: Separating planning and implementation, optimizing each
- **Quality Assurance**: Each agent focuses on their specialized domain
- **Progress Visibility**: Transparent management via `features.json` and `progress.txt`
- **Long-term Stability**: Controlling complexity through staged development

## 5. Project Structure

```
youtube-learning-companion/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â”œâ”€â”€ (auth)/            # Authentication pages
â”‚   â”‚   â”œâ”€â”€ (main)/
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # Dashboard
â”‚   â”‚   â”‚   â””â”€â”€ learn/[videoId]/ # Learning screen
â”‚   â”‚   â”œâ”€â”€ globals.css        # Global styles
â”‚   â”‚   â””â”€â”€ layout.tsx         # Root layout
â”‚   â”œâ”€â”€ components/            # Reusable UI components
â”‚   â”œâ”€â”€ lib/                   # Utility functions & business logic
â”‚   â””â”€â”€ types/                 # TypeScript type definitions
â”œâ”€â”€ docs/                      # Project documentation
â”‚   â”œâ”€â”€ authentication.md      # Google OAuth implementation spec
â”‚   â”œâ”€â”€ import_video.md        # YouTube video import feature spec
â”‚   â”œâ”€â”€ ui_design_guidelines.md # UI design guidelines
â”‚   â”œâ”€â”€ incident_reports.md    # Past bugs and solutions
â”‚   â””â”€â”€ walkthrough_20241214.md # Technical details of fixes
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma          # Database schema
â”œâ”€â”€ features.json              # Feature list (Initializer managed)
â”œâ”€â”€ progress.txt               # Work progress log (Coding Agent updated)
â”œâ”€â”€ CLAUDE.md                  # Project guidelines for AI agents
â””â”€â”€ .env.local                 # Environment variables (not in Git)
```

## 6. Development Environment Setup

### 6.1 Prerequisites

- Node.js 18.x or higher
- npm, yarn, or pnpm
- Google Cloud Platform account (for OAuth authentication)
- YouTube Data API key

### 6.2 Setup Instructions

#### 1. Clone Repository

```bash
git clone https://github.com/tinyoko/cc_ytlearn.git
cd cc_ytlearn
```

#### 2. Install Dependencies

```bash
npm install
# or
yarn install
# or
pnpm install
```

#### 3. Configure Environment Variables

Create a `.env.local` file in the project root with the following environment variables:

```bash
# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# NextAuth
NEXTAUTH_SECRET=your_random_secret_string
NEXTAUTH_URL=http://localhost:3000

# Database
DATABASE_URL="postgresql://user:password@host:port/database"

# YouTube API
YOUTUBE_API_KEY=your_youtube_api_key
```

**How to obtain environment variables**:
- `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`: Create OAuth 2.0 client in [Google Cloud Console](https://console.cloud.google.com/)
- `NEXTAUTH_SECRET`: Generate with `openssl rand -base64 32`
- `YOUTUBE_API_KEY`: Enable YouTube Data API v3 in Google Cloud Console

#### 4. Database Setup

```bash
# Apply Prisma schema and run migration
npx prisma migrate dev --name init

# Generate Prisma Client
npx prisma generate
```

#### 5. Start Development Server

```bash
npm run dev
```

Access `http://localhost:3000` in your browser.

## 7. Coding Conventions

### Directory Placement Rules

- **Components**: Place in `src/components/`
- **API Routes**: Place in `src/app/api/`
- **Type Definitions**: Place in `src/types/`
- **Utility Functions**: Place in `src/lib/`

### Code Style

- **Formatting**: Use Prettier
- **Static Analysis**: Use ESLint
- **Naming Convention**: camelCase (variables/functions), PascalCase (components/types)

## 8. Reference Documentation

| Document | Content |
|----------|---------|
| [`docs/authentication.md`](docs/authentication.md) | Google OAuth authentication implementation spec |
| [`docs/import_video.md`](docs/import_video.md) | YouTube video import feature spec |
| [`docs/ui_design_guidelines.md`](docs/ui_design_guidelines.md) | UI design guidelines (colors, fonts, layout) |
| [`features.json`](features.json) | Task list (managed by Initializer) |
| [`progress.txt`](progress.txt) | Work progress log (updated by Coding Agent) |
| [`docs/incident_reports.md`](docs/incident_reports.md) | **Important**: Solutions and prevention for past critical bugs |
| [`docs/walkthrough_20241214.md`](docs/walkthrough_20241214.md) | Technical details of subtitle/video deletion fixes |

## 9. Past Fix History and Instructions for AI

âš ï¸ **Important Instructions for Future AI Agents**

Please always consider the following lessons for project stability and future development efficiency (see [`docs/incident_reports.md`](docs/incident_reports.md) for details).

### 9.1 Do Not Change Timestamp Judgment Logic

**Background**: "All subtitle timestamps displaying as 0:00" issue occurred on 2025-12-14.

**Causes**:
1. Arbitrary "10-second threshold" excluded valid segments
2. Class instances from `youtubei.js` processed with simple property access
3. Inconsistency due to JSON double-encoding

**Solution and Instructions**:
- âœ… **Maintain current strict property checking approach**
- âœ… Data normalization: Plain Object conversion via `JSON.parse(JSON.stringify(raw))`
- âŒ **Prohibit reintroduction of speculation-based judgments or arbitrary thresholds (e.g., 10-second rule)**

**Reference**: `src/lib/transcript-utils.ts`

### 9.2 Event Handling Considerations

**Background**: "Video delete button not working" issue occurred on 2025-12-14.

**Causes**:
- Entire card wrapped in `<Link>` component
- Delete button click event conflicted with page navigation event

**Solution and Instructions**:
- âœ… **Avoid nested interactive elements**
- âœ… Don't wrap everything in `<Link>`, use `div` + `onClick` (router.push)
- âœ… Make delete button independent and prevent event propagation with `e.stopPropagation()`

**Reference**: `src/components/DashboardClient.tsx`, `src/app/learn/[id]/learn-client.tsx`

### 9.3 Handling Confirmation Dialogs

**Background**: `window.confirm` unstable depending on environment (disappears instantly, doesn't work).

**Solution and Instructions**:
- âŒ **Don't rely on `window.confirm` or `alert`**
- âœ… Use custom modal components
- âœ… Or consider immediate execution + Undo functionality

## 10. Development Roadmap

For current implementation status and future plans, refer to:

- **Feature List**: [`features.json`](features.json) - Detailed task list for all features
- **Progress Log**: [`progress.txt`](progress.txt) - Record of completed tasks

Major Milestones (Planned):
1. âœ… Environment setup and initialization (F001)
2. âœ… Authentication features (F002)
3. âœ… Database design (F003)
4. ğŸ”„ Video import features (F004)
5. ğŸ“… Dashboard features (F005)
6. ğŸ“… Learning page (F006)
7. ğŸ“… UI/UX optimization (F007-F008)
8. ğŸ“… Type definitions and utilities (F009)

## 11. Contributing

This project is currently developed under AI agent leadership, but contributions from human developers are also welcome.

### How to Contribute

1. Fork this repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'feat: Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Create a Pull Request

### Notes

- **Always check `docs/incident_reports.md`** before modifying code related to subtitle processing or deletion features
- **For adding features not listed in `features.json`**, please propose via Issue first

## 12. License

TBD (To be determined)

---

**ğŸ¤– Generated with Multi-AI Development System**
- **Initializer Agent**: Antigravity (Gemini 1.5 Pro)
- **Coding Agent**: Claude Sonnet 4.5
